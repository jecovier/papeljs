var ie=Object.defineProperty;var ae=(n,e,t)=>e in n?ie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>ae(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const B="data-slot",P="data-preserve",F="data-intercepted",q="data-nointercepted",E="data-prefetch",b="data-prefetched",ce="loading-started",le="loading-finished";var L=(n=>(n.GET="GET",n.POST="POST",n.PUT="PUT",n.PATCH="PATCH",n.DELETE="DELETE",n))(L||{}),V=(n=>(n.HTML="text/html",n.JSON="application/json",n.TEXT="text/plain",n))(V||{}),m=(n=>(n.IsLoading="is-loading",n.IsIndeterminate="is-indeterminate",n.BeforeLoading="before-loading",n.AfterLoading="after-loading",n))(m||{});function _(n,e){e.replaceChildren(...Array.from(n.children).map(t=>t.cloneNode(!0)))}function G(n){return n?new DOMParser().parseFromString(n,"text/html"):document.implementation.createHTMLDocument()}function p(n,e){document.dispatchEvent(new CustomEvent(n,e))}class Y{constructor(){d(this,"config",{})}async load(e,t=L.GET,o,s){if(!e)return console.error("URL is required to load HTML"),"";try{const{headers:r,...i}=s||{},a=await fetch(e,{method:t,headers:{"Content-Type":V.HTML,...r},...o?{body:JSON.stringify(o)}:{},...i});if(!a.ok)throw new Error(`Failed to load ${e}: ${a.statusText}`);return await a.text()}catch(r){return console.error("Error loading HTML: ",r),""}}async loadHTMLDocument(e,t=L.GET,o,s){const r=await this.load(e,t,o,s);return G(r)}async firstToMatch(e,t){for(const o of e){const s=await this.load(o);if(s&&t(s))return s}return console.error("None of the urls could be loaded"),""}}class de{constructor(){d(this,"currentLayouts",[]);d(this,"loadedLayouts",[])}resetLayouts(){this.currentLayouts=[]}render(e,t,o){const s=this._formatTag(t);if(!o)throw new Error("layout is required");this.currentLayouts.push(s),!this.isAlreadyRendered(s)&&(this.loadedLayouts.push(s),this._copyElementAttributes(o.body,e.body),this._replaceContent(o.body,e.body))}markAsRendered(e){this.currentLayouts.push(this._formatTag(e))}replaceSlotContents(e){document.querySelectorAll("slot").forEach(o=>{const s=o.getAttribute("name")||"default",r=e.find(i=>i.slot===s);r&&o.innerHTML!==r.content.innerHTML&&_(r.content,o)})}isAlreadyRendered(e){return this.loadedLayouts.includes(e)}getSlotsContents(e){const t=[];return e.querySelectorAll(`slot, [slot], [${B}]`).forEach(s=>{const r=s.getAttribute("slot")||s.getAttribute(B)||"default";t.push({slot:r,content:s})}),t}_copyElementAttributes(e,t){Array.from(e.attributes).forEach(o=>{t.setAttribute(o.name,o.value)})}mergeHeads(e,t){const o=e.head,s=t.head;if(o.innerHTML){if(o.innerHTML&&!s.innerHTML){_(o,s);return}this._mergeElements(o,s)}}_mergeElements(e,t){const o=t.innerHTML;Array.from(e.children).forEach(s=>{if(this._elementIsPapelScript(s))return;const r=s.outerHTML;o.includes(r)||t.appendChild(s)})}consolidateLayouts(){const e=new Set(this.currentLayouts),t=new Set(this.loadedLayouts);this.currentLayouts.filter(s=>!t.has(s)).forEach(s=>{const r=document.querySelector(`link[href$="${s}"]`);r==null||r.remove()}),this.loadedLayouts=Array.from(e),this.currentLayouts=[]}_replaceContent(e,t){const o=t.querySelectorAll(`[${P}]`),s=new Map;o.forEach((r,i)=>{const a=r.getAttribute(P)??`preserve-${i}`;s.set(a,r)}),_(e,t),s.forEach((r,i)=>{const a=t.querySelector(`[${P}="${i}"]`);a?a.replaceWith(r):t.insertBefore(r,t.firstChild)})}_elementIsPapelScript(e){var t;return e.tagName==="SCRIPT"&&!!((t=e.getAttribute("src"))!=null&&t.includes("papel"))}_formatTag(e){return e.endsWith(".html")?e:`${e.replace(/\/$/,"")}/index.html`}}class K{constructor(){d(this,"navigationCallback");d(this,"scrollPositions");this.navigationCallback=async()=>{},this.scrollPositions=new Map,window.addEventListener("popstate",e=>{const t=new URL(location.href);this._handlePopState(t,e)})}onNavigate(e){this.navigationCallback=e}startInterception(e){this._interceptLinks(e)}isNavigationAvailable(){return"navigation"in window&&typeof window.navigation<"u"}_isLocalUrl(e){return e.origin===location.origin}_shouldIntercept(e){return this._isLocalUrl(e)&&!!this.navigationCallback}_interceptLinks(e){e.querySelectorAll(`a:not([${F}]):not([${q}]):not([target]):not([href^="${location.origin}"]):not([download])`).forEach(t=>{if(t instanceof HTMLAnchorElement){if(!this._shouldIntercept(new URL(t.href))){t.setAttribute(q,"true");return}t.setAttribute(F,"true"),t.addEventListener("click",o=>this._handleLinkClick.bind(this)(o,t))}})}async _handleLinkClick(e,t){e.preventDefault(),this.navigate(t.href)}navigate(e){const t=new URL(e);this._shouldIntercept(t)&&(this.scrollPositions.set(location.href,{x:window.scrollX,y:window.scrollY}),this._addNavigationToBrowserHistory(t),this._handleNavigation(t))}_addNavigationToBrowserHistory(e){window.history.pushState({},"",e)}async _handleNavigation(e){await this.navigationCallback(e),this._restoreScrollPosition(e)}_handlePopState(e,t){if(this._shouldIntercept(e)){if(t.preventDefault(),this.isNavigationAvailable()){document.startViewTransition(()=>this._handleNavigation(e));return}this._handleNavigation(e)}}_restoreScrollPosition(e){window.scrollTo(0,0)}}class Z{constructor(e){d(this,"loadedUrls",[]);this.htmlLoader=e}startPrefetch(e){this._addObserverToLinks(e,async t=>{const o=t.getAttribute(E);if(o!=="all"){this._prefetchRequest(t.href);return}if(o==="all"){const s=await this._prefetchRequest(t.href),i=new DOMParser().parseFromString(s,"text/html");this.imagePrefetch(i),this.templateImagePrefetch(i)}})}imagePrefetch(e){e.querySelectorAll(`img[${E}]`).forEach(o=>{this._prefetchRequest(o.src),this.loadedUrls.push(o.src)})}templateImagePrefetch(e){e.querySelectorAll("template").forEach(o=>{this.imagePrefetch(o.content)})}_addObserverToLinks(e,t){const o=this._getIntersectionObserver(t);e.querySelectorAll(`a[${E}]:not([${E}="none"]):not([${b}])`).forEach(r=>{if(this._isLocalLink(r)){if(this._isAlreadyPrefetched(r)){r.setAttribute(b,"true");return}o.observe(r)}})}_getIntersectionObserver(e){return new IntersectionObserver(t=>{t.forEach(o=>{if(o.isIntersecting){const s=o.target;if(s.setAttribute(b,"true"),this._isAlreadyPrefetched(s))return;e(s),this.loadedUrls.push(s.href)}})})}_isAlreadyPrefetched(e){return this.loadedUrls.includes(e.href)}_isLocalLink(e){return e.hostname===window.location.hostname}async _prefetchRequest(e){return this.htmlLoader.load(e,L.GET,void 0,{priority:"low"})}}class J{constructor(){d(this,"currentPath");d(this,"cumulativePaths");d(this,"allLinks");this.currentPath=this.normalizePath(window.location.pathname),this.cumulativePaths=this.getCumulativePaths(),this.allLinks=document.querySelectorAll("a")}normalizePath(e){return e.endsWith("/")?e.slice(0,-1):e}ensureIndexPath(e){return/\.[a-zA-Z0-9]+$/.test(e)?e:`${e}/index.html`}getCumulativePaths(){return this.currentPath.split("/").filter(t=>t!=="").reduce((t,o)=>{const s=t.length>0?t[t.length-1]:"";return t.push(`${s}/${o}`),t},[])}getMatchingLinks(){return this.allLinks?Array.from(this.allLinks).filter(e=>{const t=new URL(e.href,window.location.origin);if(t.origin!==window.location.origin)return!1;const o=this.normalizePath(t.pathname),s=this.ensureIndexPath(o),r=this.ensureIndexPath(this.currentPath);return this.cumulativePaths.includes(o)||s===r}):[]}clearPreviousMatches(){var e;(e=this.allLinks)==null||e.forEach(t=>t.classList.remove("pl-path-match"))}highlightMatchingLinks(e){this.currentPath=this.normalizePath(window.location.pathname),this.cumulativePaths=this.getCumulativePaths(),this.allLinks=e.querySelectorAll("a"),this.clearPreviousMatches(),this.getMatchingLinks().forEach(o=>{o.classList.add("pl-path-match")})}}class X{constructor(){d(this,"startAnimationTimeout",null)}startLoadingAnimation(){document.body.classList.contains(m.IsLoading)||document.body.classList.contains(m.BeforeLoading)||document.body.classList.contains(m.IsIndeterminate)||(this.startAnimationTimeout&&(clearTimeout(this.startAnimationTimeout),this.startAnimationTimeout=null),document.body.classList.add(m.BeforeLoading),this.startAnimationTimeout=setTimeout(()=>{p(ce),this.triggerLoadingAnimation()},200))}triggerLoadingAnimation(){document.body.classList.add(m.IsLoading),document.body.classList.remove(m.BeforeLoading),this.startAnimationTimeout=setTimeout(()=>{document.body.classList.add(m.IsIndeterminate)},2e3)}stopLoadingAnimation(){this.startAnimationTimeout&&(clearTimeout(this.startAnimationTimeout),this.startAnimationTimeout=null),(document.body.classList.contains(m.IsLoading)||document.body.classList.contains(m.IsIndeterminate))&&(document.body.classList.add(m.AfterLoading),setTimeout(()=>{document.body.classList.remove(m.AfterLoading)},500)),document.body.classList.remove(m.IsLoading),document.body.classList.remove(m.BeforeLoading),document.body.classList.remove(m.IsIndeterminate),p(le)}}const h={REQUEST_TIMEOUT:1e4,CACHE_MAX_SIZE:50,EVENTS:{PAGE_LOADED:"page-loaded",PAGE_LOAD_ERROR:"page-load-error",LAYOUT_RENDERED:"layout-rendered",CACHE_CLEARED:"cache-cleared",COMPRESSION_STATS:"compression-stats"},SELECTORS:{LAYOUT_LINKS:"link[data-layout], link[rel='layout']",SLOTS:"slot, [slot], [data-slot]",PRESERVE_ELEMENTS:"[data-preserve]"},PREFETCH:{ENABLED:!0,DELAY:100,MAX_CONCURRENT:3},VIEW_TRANSITIONS:{ENABLED:!0,FALLBACK_DURATION:300},COMPRESSION:{ENABLED:!0,MIN_SIZE_TO_COMPRESS:1024,COMPRESSION_LEVEL:6,ENABLE_STATS:!0}};class me{constructor(){d(this,"stats",{totalCompressed:0,totalUncompressed:0,compressionRatio:0,spaceSaved:0,compressionCount:0,decompressionCount:0,averageCompressionTime:0,averageDecompressionTime:0})}async compressDocument(e){const t=e.documentElement.outerHTML,o=new TextEncoder().encode(t).length;if(o<h.COMPRESSION.MIN_SIZE_TO_COMPRESS)return e;const s=performance.now();try{return typeof CompressionStream<"u"?await this.compressWithWebAPI(t,o,s):await this.compressWithFallback(t,o,s)}catch(r){return console.warn("Compression failed, returning original document:",r),e}}async compressWithWebAPI(e,t,o){const r=new TextEncoder().encode(e),i=new CompressionStream("gzip"),a=i.writable.getWriter(),u=i.readable.getReader();a.write(r),a.close();const c=[];let f;for(;!(f=await u.read()).done;)c.push(f.value);const A=new Uint8Array(c.reduce((S,re)=>S+re.length,0));let k=0;for(const S of c)A.set(S,k),k+=S.length;const U=performance.now()-o,H=A.length;return this.updateStats(t,H,U,0),{compressed:A,originalSize:t,compressedSize:H,compressionTime:U,timestamp:Date.now()}}async compressWithFallback(e,t,o){const s=this.simpleRLECompress(e),r=s.length,i=performance.now()-o;return this.updateStats(t,r,i,0),{compressed:new TextEncoder().encode(s),originalSize:t,compressedSize:r,compressionTime:i,timestamp:Date.now()}}simpleRLECompress(e){if(e.length===0)return e;let t="",o=1,s=e[0];for(let r=1;r<e.length;r++)e[r]===s&&o<255?o++:(o>3?t+=`\0${String.fromCharCode(o)}${s}`:t+=s.repeat(o),s=e[r],o=1);return o>3?t+=`\0${String.fromCharCode(o)}${s}`:t+=s.repeat(o),t}async decompressDocument(e){if(this.isCompressedData(e)){const t=performance.now();try{let o;typeof DecompressionStream<"u"?o=await this.decompressWithWebAPI(e.compressed):o=this.decompressWithFallback(e.compressed);const s=performance.now()-t;return this.updateStats(0,0,0,s),new DOMParser().parseFromString(o,"text/html")}catch(o){throw console.error("Decompression failed:",o),o}}return e}async decompressWithWebAPI(e){const t=new DecompressionStream("gzip"),o=t.writable.getWriter(),s=t.readable.getReader();o.write(e),o.close();const r=[];let i;for(;!(i=await s.read()).done;)r.push(i.value);const a=new Uint8Array(r.reduce((c,f)=>c+f.length,0));let u=0;for(const c of r)a.set(c,u),u+=c.length;return new TextDecoder().decode(a)}decompressWithFallback(e){const t=new TextDecoder().decode(e);let o="",s=0;for(;s<t.length;)if(t[s]==="\0"&&s+2<t.length){const r=t.charCodeAt(s+1),i=t[s+2];o+=i.repeat(r),s+=3}else o+=t[s],s++;return o}isCompressedData(e){return"compressed"in e&&"originalSize"in e}updateStats(e,t,o,s){if(e>0){this.stats.totalCompressed+=t,this.stats.totalUncompressed+=e,this.stats.compressionCount++,this.stats.spaceSaved+=e-t;const r=this.stats.averageCompressionTime*(this.stats.compressionCount-1)+o;this.stats.averageCompressionTime=r/this.stats.compressionCount}if(s>0){this.stats.decompressionCount++;const r=this.stats.averageDecompressionTime*(this.stats.decompressionCount-1)+s;this.stats.averageDecompressionTime=r/this.stats.decompressionCount}this.stats.totalUncompressed>0&&(this.stats.compressionRatio=this.stats.totalCompressed/this.stats.totalUncompressed),p(h.EVENTS.COMPRESSION_STATS,{stats:this.getStats()})}getStats(){return{...this.stats}}resetStats(){this.stats={totalCompressed:0,totalUncompressed:0,compressionRatio:0,spaceSaved:0,compressionCount:0,decompressionCount:0,averageCompressionTime:0,averageDecompressionTime:0}}isCompressionAvailable(){return typeof CompressionStream<"u"||typeof TextEncoder<"u"}getSizeInfo(e){if(this.isCompressedData(e))return{size:e.compressedSize,originalSize:e.originalSize,compressionRatio:e.compressedSize/e.originalSize,spaceSaved:e.originalSize-e.compressedSize};{const t=e.documentElement.outerHTML;return{size:new TextEncoder().encode(t).length}}}}class ue{constructor(e=h.CACHE_MAX_SIZE){d(this,"cache",new Map);d(this,"maxSize");d(this,"compression");this.maxSize=e,this.compression=new me}async get(e){const t=this.cache.get(e);if(!t)return null;if(t.accessCount++,t.timestamp=Date.now(),this.cache.delete(e),this.cache.set(e,t),t.isCompressed)try{return(await this.compression.decompressDocument(t.document)).cloneNode(!0)}catch(o){return console.error(`Error decompressing cached document for ${e}:`,o),this.cache.delete(e),null}return t.document.cloneNode(!0)}async set(e,t){this.cache.size>=this.maxSize&&this.evictLRU();let o,s=!1;try{o=await this.compression.compressDocument(t),s="compressed"in o}catch(i){console.warn(`Compression failed for ${e}, storing uncompressed:`,i),o=t,s=!1}const r={document:o,timestamp:Date.now(),accessCount:1,isCompressed:s};this.cache.set(e,r)}has(e){return this.cache.has(e)}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}getStats(){const e=Array.from(this.cache.keys()),t=Array.from(this.cache.values()),o=t.length>0?e[t.reduce((u,c,f)=>c.timestamp<t[u].timestamp?f:u,0)]:null,s=t.length>0?e[t.reduce((u,c,f)=>c.accessCount>t[u].accessCount?f:u,0)]:null;let r=0,i=0,a=0;for(const u of t){const c=this.compression.getSizeInfo(u.document);r+=c.size,u.isCompressed&&c.originalSize?(i+=c.size,a+=c.originalSize):a+=c.size}return{size:this.cache.size,maxSize:this.maxSize,hitRate:0,keys:e,oldestEntry:o,mostAccessed:s,compressionStats:this.compression.getStats(),memoryUsage:{total:r,compressed:i,uncompressed:a,spaceSaved:a-i}}}evictLRU(){if(this.cache.size===0)return;let e=null,t=Date.now();for(const[o,s]of this.cache.entries())s.timestamp<t&&(t=s.timestamp,e=o);e&&this.cache.delete(e)}async prewarm(e,t){const o=e.map(async s=>{if(!this.has(s))try{const r=await t(s);await this.set(s,r)}catch(r){console.warn(`Failed to prewarm cache for ${s}:`,r)}});await Promise.all(o)}cleanup(e=5*60*1e3){const t=Date.now();for(const[o,s]of this.cache.entries())t-s.timestamp>e&&this.cache.delete(o)}getCompressionStats(){return this.compression.getStats()}isCompressionAvailable(){return this.compression.isCompressionAvailable()}async optimize(){const e=Array.from(this.cache.entries());for(const[t,o]of e)if(!o.isCompressed&&o.document instanceof Document)try{const s=await this.compression.compressDocument(o.document);"compressed"in s&&(o.document=s,o.isCompressed=!0)}catch(s){console.warn(`Failed to compress cached document for ${t}:`,s)}}}const $=new Y,l=new de,x=new K,he=new Z($),pe=new J,v=new X,y=new ue;async function fe(){try{v.startLoadingAnimation();const n=l.getSlotsContents(document),e=ee(document),t=e.shift();t&&await te(t),await Promise.all(e.map(o=>oe(o))),l.replaceSlotContents(n),l.consolidateLayouts(),se(document),p(h.EVENTS.PAGE_LOADED)}catch(n){console.error("Error loading page:",n),p(h.EVENTS.PAGE_LOAD_ERROR,{error:n})}finally{v.stopLoadingAnimation()}}async function j(n){try{v.startLoadingAnimation(),l.resetLayouts();const e=await Q(n.toString()),t=l.getSlotsContents(e),o=ee(e),s=o.shift();s&&await te(s),await Promise.all(o.map(r=>oe(r))),await ge(async()=>{l.replaceSlotContents(t),l.consolidateLayouts(),se(document),p(h.EVENTS.PAGE_LOADED)})}catch(e){console.error("Error loading fetched page:",e),p(h.EVENTS.PAGE_LOAD_ERROR,{error:e})}finally{v.stopLoadingAnimation()}}async function Q(n){const e=await y.get(n);if(e)return e;const t=await $.load(n),o=G(t);return await y.set(n,o),o}function ee(n,e=!0){const t=n.querySelectorAll(h.SELECTORS.LAYOUT_LINKS),o=Array.from(t).map(s=>s.getAttribute("href")??"").filter(s=>s.length>0);return o.length&&e&&t.forEach(s=>s.remove()),o}function ge(n){if(x.isNavigationAvailable()){document.startViewTransition(n);return}n()}async function te(n){if(l.isAlreadyRendered(n)){l.markAsRendered(n);return}try{const e=await $.loadHTMLDocument(n);l.render(document,n,e),l.mergeHeads(e,document),p(h.EVENTS.LAYOUT_RENDERED,{layoutUrl:n})}catch(e){throw console.error(`Error rendering base layout ${n}:`,e),e}}async function oe(n){if(l.isAlreadyRendered(n)){l.markAsRendered(n);return}try{const e=await Q(n),t=l.getSlotsContents(e);l.markAsRendered(n),l.replaceSlotContents(t),l.mergeHeads(e,document),p(h.EVENTS.LAYOUT_RENDERED,{layoutUrl:n})}catch(e){throw console.error(`Error rendering partial layout ${n}:`,e),e}}function se(n){x.startInterception(n),x.onNavigate(j),he.startPrefetch(n),pe.highlightMatchingLinks(n)}function ye(){y.clear()}function T(){return y.getStats()}function C(){return y.getCompressionStats()}function w(){return y.isCompressionAvailable()}async function Se(){await y.optimize()}function g(n,e=2){if(n===0)return"0 Bytes";const t=1024,o=e<0?0:e,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(n)/Math.log(t));return parseFloat((n/Math.pow(t,r)).toFixed(o))+" "+s[r]}function z(n){return n<1?"< 1ms":n<1e3?`${n.toFixed(2)}ms`:`${(n/1e3).toFixed(2)}s`}function ne(n,e){return n===0?0:(n-e)/n*100}function Ee(){const n=T(),e=C(),t=w();console.group("📊 PapelJS Compression Statistics"),console.log("🔧 Compression Status:",t?"✅ Available":"❌ Not Available"),t?(console.group("📈 Memory Usage"),console.log("Total Cache Size:",g(n.memoryUsage.total)),console.log("Compressed Size:",g(n.memoryUsage.compressed)),console.log("Uncompressed Size:",g(n.memoryUsage.uncompressed)),console.log("Space Saved:",g(n.memoryUsage.spaceSaved)),console.log("Savings Percentage:",`${ne(n.memoryUsage.uncompressed,n.memoryUsage.compressed).toFixed(1)}%`),console.groupEnd(),console.group("⚡ Performance Metrics"),console.log("Compression Count:",e.compressionCount),console.log("Decompression Count:",e.decompressionCount),console.log("Average Compression Time:",z(e.averageCompressionTime)),console.log("Average Decompression Time:",z(e.averageDecompressionTime)),console.log("Overall Compression Ratio:",`${(e.compressionRatio*100).toFixed(1)}%`),console.groupEnd(),console.group("🎯 Cache Information"),console.log("Cache Entries:",n.size),console.log("Max Cache Size:",n.maxSize),console.log("Most Accessed:",n.mostAccessed||"None"),console.log("Oldest Entry:",n.oldestEntry||"None"),console.groupEnd()):(console.log("⚠️ Compression is not available in this browser"),console.log("💡 Consider using a modern browser with Web Compression API support")),console.groupEnd()}function Le(){const n=document.createElement("div");n.className="papeljs-compression-stats",n.style.cssText=`
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 15px;
    border-radius: 8px;
    font-family: monospace;
    font-size: 12px;
    z-index: 10000;
    max-width: 300px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  `;const e=()=>{const t=T(),o=C();if(!w()){n.innerHTML=`
        <div style="color: #ff6b6b;">⚠️ Compression not available</div>
        <div style="font-size: 10px; margin-top: 5px;">Use modern browser</div>
      `;return}const r=ne(t.memoryUsage.uncompressed,t.memoryUsage.compressed);n.innerHTML=`
      <div style="margin-bottom: 10px; font-weight: bold; color: #4ecdc4;">📊 Compression Stats</div>
      
      <div style="margin-bottom: 8px;">
        <div style="color: #95a5a6;">Memory Usage:</div>
        <div>Total: ${g(t.memoryUsage.total)}</div>
        <div>Saved: ${g(t.memoryUsage.spaceSaved)} (${r.toFixed(1)}%)</div>
      </div>
      
      <div style="margin-bottom: 8px;">
        <div style="color: #95a5a6;">Performance:</div>
        <div>Compressed: ${o.compressionCount}</div>
        <div>Decompressed: ${o.decompressionCount}</div>
        <div>Avg Time: ${z(o.averageCompressionTime)}</div>
      </div>
      
      <div style="margin-bottom: 8px;">
        <div style="color: #95a5a6;">Cache:</div>
        <div>Entries: ${t.size}/${t.maxSize}</div>
        <div>Ratio: ${(o.compressionRatio*100).toFixed(1)}%</div>
      </div>
      
      <div style="font-size: 10px; color: #7f8c8d; text-align: center; margin-top: 10px;">
        PapelJS Compression
      </div>
    `};return e(),setInterval(e,2e3),n}function ve(){if(window.location.search.includes("debug=compression")){const e=Le();document.body.appendChild(e)}}function Te(){document.addEventListener(h.EVENTS.COMPRESSION_STATS,n=>{const{stats:e}=n.detail;e.compressionCount%10===0&&e.compressionCount>0&&(console.log(`🎉 Compressed ${e.compressionCount} documents!`),console.log(`💾 Total space saved: ${g(e.spaceSaved)}`))})}function Ce(){const n=T(),e=C();return JSON.stringify({timestamp:new Date().toISOString(),cache:n,compression:e,browser:{userAgent:navigator.userAgent,compressionAvailable:w()}},null,2)}function we(){return new Y}function Ae(){return new K}function Pe(n){return new Z(n)}function be(){return new J}function _e(){return new X}let R,N,I,D,M;function Re(){return R||(R=we()),R}function O(){return N||(N=Ae()),N}function Ne(){return I||(I=Pe(Re())),I}function Ie(){return D||(D=be()),D}function W(){return M||(M=_e()),M}const De={interceptLinks(n){O().startInterception(n),O().onNavigate(j)},prefetchLinks(n){Ne().startPrefetch(n)},highlightMatchingLinks(n){Ie().highlightMatchingLinks(n)},navigate(n){O().navigate(n)},startLoading(){W().startLoadingAnimation()},stopLoading(){W().stopLoadingAnimation()},getCacheStats:T,getCompressionStats:C,isCompressionAvailable:w,optimizeCache:Se,clearLayoutCache:ye,logCompressionStats:Ee,exportCompressionStats:Ce};window.addEventListener("load",()=>{fe(),ve(),Te()},{once:!0});window.papel=De;
